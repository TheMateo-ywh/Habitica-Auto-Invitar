name: Habitica Party Bot - Continuous Schedule

on:
  schedule:
    # Ejecuta cada 5 minutos, todo el dÃ­a, todos los dÃ­as.
    # Formato: minuto hora dÃ­a-del-mes mes dÃ­a-de-la-semana
    - cron: '*/5 * * * *'
  
  # Para ejecutar manualmente
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Dry run (no real invites)'
        required: false
        type: boolean
        default: false

jobs:
  run-habitica-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 3  # MÃ¡s que suficiente para 20s
    
    steps:
      - name: Checkout del cÃ³digo
        uses: actions/checkout@v4
      
      - name: Configurar Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.22'
      
      - name: Verificar estructura
        run: |
          echo "ğŸ“… Horario programado: Cada 5 minutos, continuo."
          echo "ğŸ”„ Frecuencia: MÃ¡xima (cada 5 min)."
          echo "ğŸ“ Verificando estructura..."
          if [ ! -f "main.go" ]; then
            echo "âŒ ERROR: main.go no encontrado"
            exit 1
          fi
          echo "âœ… Estructura correcta"
      
      # ... (Los pasos restantes de "Inicializar mÃ³dulo Go", "Descargar dependencias", 
      # "Compilar programa", "Ejecutar bot" y "Limpiar" permanecen **exactamente igual**)
      # Solo asegÃºrate de que el comando final use `-single-run true`.